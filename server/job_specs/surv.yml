---

name: Survival Plot

description: "Calculate a survival plot."

fallbackUser: "osumopublicuser"

task:
    name: surv
    mode: r

    script: >
        @include(surv.r)

    inputs:
      - name: input_rdata
        type: string
        format: text
      - name: num_clusters
        type: number
        format: number

    outputs:
      - name: fit
        type: r
        target: memory
        format: object
      - name: sdf
        type: r
        target: memory
        format: object
      - name: dataplot
        type: image
        target: filepath
        format: png

inputs:
  - key: input_rdata
    name: "Input Data"
    description: "A set of rdata."
    type: item
    subtype: rdata
    onlyNames: "\\.rdata$"
  - key: num_clusters
    name: "Num. Clusters"
    description: "The number (k) of clusters used in calculations"
    type: integer
    default: 5
    format: number

parameters:
  - key: targetFolderId
    name: "Target Folder"
    type: folder
    input: false

outputs:
  - key: fit
    parentType: "folder"
    parent: "parameter:targetFolderId"
    name: "fitoutput.txt"
    dataType: "r"
    dataFormat: "serialized"
    show: false
  - key: sdf
    parentType: "folder"
    parent: "parameter:targetFolderId"
    name: "sdfoutput.txt"
    dataType: "r"
    dataFormat: "serialized"
    show: false
  - key: dataplot
    parentType: "folder"
    parent: "parameter:targetFolderId"
    show: image
    name: "Survival Plot.png"
    dataType: "image"
    dataFormat: "png"
