---

name: Survival Plot

description: "Calculate a survival plot."

task:
    name: surv
    mode: r

    script: >
        @include(surv.r)

    inputs:
      - name: input_path
        type: string
        format: text
      - name: num_clusters
        type: number
        format: number
      - name: png_output_path
        type: string
        format: text

    outputs:
      - name: fit
        type: r
        target: memory
        format: object
      - name: sdf
        type: r
        target: memory
        format: object
      - name: dataplot
        type: image
        target: filepath
        format: png

inputs:
    - key: input_path
      name: "Input Data"
      description: "A set of rdata."
      type: item
      subtype: rdata
    - key: num_clusters
      name: "Num. Clusters"
      description: "The number (k) of clusters used in calculations"
      type: integer
      default: 5
      format: number

parameters:
  - key: targetFolderId
    name: "Target Folder"
    type: folder
    input: false
  - key: png_output_path
    default: "plot.png"
    type: temppath

outputs: 
  - key: fit
    parentType: "folder"
    parent: "parameter:targetFolderId"
    name: "fitoutput.txt"
    dataType: "r"
    dataFormat: "serialized"
  - key: sdf
    parentType: "folder"
    parent: "parameter:targetFolderId"
    name: "sdfoutput.txt"
    dataType: "r"
    dataFormat: "serialized"
  - key: dataplot
    parentType: "folder"
    parent: "parameter:targetFolderId"
    name: "Survival Plot.png"
    dataType: "image"
    dataFormat: "png"
