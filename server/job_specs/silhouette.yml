---

name: "Silhouette Plot"

description: "Show silhouette plot"

fallbackUser: "osumopublicuser"

task:
  name: silhouette
  mode: r

  script: >
      @include(silhouette.r)

  inputs:
    - name: sil_input_path
      type: string
      format: text
    - name: silhouette_clusters
      type: number
      format: number

  outputs:
    - name: dataplot1
      target: filepath
      type: image
      format: png
    - name: dataplot2
      target: filepath
      type: image
      format: png

inputs:
  - key: sil_input_path
    name: "MicroRNA Expression Profile"
    description: "miRNA data."
    type: file
    subtype: rdata
    preferredNames: "^sil_.*csv$"
    notes: "This must be a CSV file with one column per subject, one header row, and one data row per micro RNA"
  - key: silhouette_clusters
    name: "Number of Clusters (k)"
    description: "The number (k) of clusters used in calculations"
    type: integer
    default: 2
    format: number
    notes: "Clustering is performed via k-means."

parameters:
  - key: targetFolderId
    name: "Target Folder"
    type: folder
    input: false

outputs:
  - key: dataplot1
    show: image
    parentType: "folder"
    parent: "parameter:targetFolderId"
    name: "dataplot1.png"
    dataType: "image"
    dataFormat: "png"
    displayName: "Silhouette plot"
  - key: dataplot2
    show: image
    parentType: "folder"
    parent: "parameter:targetFolderId"
    name: "dataplot2.png"
    dataType: "image"
    dataFormat: "png"
    displayName: "Nearest Neighbor Graph"
